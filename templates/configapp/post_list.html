{% extends 'configapp/base.html' %}
{% block content %}
<style>
  .post-card img {
    width: 40%;
    height: 400px;
  }
</style>
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h4">Posts  </h1>
  {% if user.is_staff %}<a class="btn btn-sm btn-primary" href="{% url 'configapp:create_post' %}">Create post</a>{% endif %}
</div>
<div class="posts-list">
{% for post in posts %}
  <div class="card mb-4 post-card">
    {% if post.photo %}<img src="{{ post.photo.url }}" class="card-img-top" alt="{{ post.title }}">{% endif %}
    <div class="card-body">
      <h5 class="card-title"><a class="stretched-link text-decoration-none" href="{% url 'configapp:post_detail' post.pk %}">{{ post.title }}</a></h5>
      <p class="card-text text-muted">by {{ post.author }} â€” {{ post.created_at|date:'SHORT_DATETIME_FORMAT' }}</p>
      <p class="card-text">{{ post.description|truncatechars:140 }}</p>
    </div>
  </div>
{% empty %}
  <p>No posts yet.</p>
{% endfor %}
</div>
{% endblock %}
